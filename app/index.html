<!DOCTYPE html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <title>Neighborhood map by @davcs86 (KnockoutJS version)</title>
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

        <!-- build:css(.) styles/vendor.css -->
        <!-- bower:css -->
        <link rel="stylesheet" href="/bower_components/material-design-lite/material.min.css">
        <!-- endbower -->
        <!-- endbuild -->

        <!-- build:css(.tmp) styles/main.css -->
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild -->
        <!-- build:js scripts/vendor/modernizr.js -->
        <script src="/bower_components/modernizr/modernizr.js"></script>
        <!-- endbuild -->

        <!-- build:js(.) scripts/vendor.js -->
        <!-- bower:js -->
        <script src="/bower_components/jquery/dist/jquery.js"></script>
        <script src="/bower_components/knockout/dist/knockout.js"></script>
        <script src="/bower_components/webcomponentsjs/webcomponents.js"></script>
        <script src="/bower_components/material-design-lite/material.min.js"></script>
        <script src="/bower_components/lodash/lodash.js"></script>
        <!-- endbower -->
        <!-- endbuild -->

        <link rel="import" href="bower_components/google-map/google-map.html">
        <link rel="import" href="bower_components/google-map/google-map-marker.html">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <body>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
            mdl-layout--fixed-header">
            <header class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <span class="mdl-layout-title">Neighborhood map by @davcs86 (KnockoutJS version)</span>
                    <div class="mdl-layout-spacer"></div>
                </div>
            </header>
            <div class="mdl-layout__drawer">
                <form id="searchForm">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="filterQuery" data-bind="textInput: filterQuery">
                        <label class="mdl-textfield__label" for="filterQuery">Search...</label>
                    </div>
                    <div>
                        Filter locations by:
                    </div>
                    <div>
                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterByName">
                            <input type="checkbox" id="filterByName" class="mdl-checkbox__input" data-bind="checked: filterByName">
                            <span class="mdl-checkbox__label">Name</span>
                        </label>
                    </div>
                    <div>
                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterByVicinity">
                            <input type="checkbox" id="filterByVicinity" class="mdl-checkbox__input" data-bind="checked: filterByVicinity">
                            <span class="mdl-checkbox__label">Address</span>
                        </label>
                    </div>
                </form>
                <nav class="mdl-navigation" data-bind="foreach: {data: filteredLocations, as: 'loc'}">
                    <div class="mdl-navigation__link" data-bind="click: $parent.selectListItem">
                        <div class="inner">
                            <img data-bind="attr: {src: ((typeof(loc.google.photos)!=='undefined' && loc.google.photos.length > 0) ? loc.google.photos[0].getUrl40 : loc.google.icon), alt: loc.google.name+'\'s photo' }" class="avatar" />
                            <div class="list-item-text">
                                <h5 data-bind="text: loc.google.name"></h5>
                                <p data-bind="text: loc.google.vicinity"></p>
                                <p>Google rating: <strong data-bind="text: loc.google.rating+' / 5.0'"></strong></p>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
            <main class="mdl-layout__content mapContainer">
                <div class="page-content">
                    <template is="dom-bind" id="locationsMap" data-bind="polymerBind:{property:'locations', propertyValue:filteredLocations, property2: 'selectedMarkerIdVal', property2Value:selectedMarkerId }">
                        <google-map id="locationsMapElement" drag-events min-zoom="8" zoom="12" language="en">
                            <template is="dom-repeat" items="{{locations}}" as="marker">
                                <google-map-marker
                                    mouse-events
                                    id="{{marker.google.place_id}}"
                                    latitude="{{marker.google.geometry.location.latNum}}"
                                    longitude="{{marker.google.geometry.location.lngNum}}"
                                    animation="{{selectedMarkerIdVal}}"
                                    title="{{marker.google.name}}"></google-map-marker>
                            </template>
                        </google-map>
                    </template>
                </div>
            </main>
        </div>
        <!-- build:js scripts/main.js -->
        <script src="scripts/vendor/knockoutjs.localstorage.js"></script>
        <script src="scripts/vendor/core.js"></script>
        <script src="scripts/vendor/enc-base64.js"></script>
        <script src="scripts/vendor/hmac.js"></script>
        <script src="scripts/vendor/sha1.js"></script>
        <script src="scripts/vendor/sha256.js"></script>
        <script src="scripts/vendor/oauth-1.0a.js"></script>
        <script src="scripts/koPolymerHandler.js"></script>
        <script src="scripts/LocationsFactory.js"></script>
        <script src="scripts/LocationsModel.js"></script>
        <script src="scripts/LocationsViewModel.js"></script>
        <!-- endbuild -->
    </body>
</html>
